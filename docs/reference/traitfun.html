<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="getTrait gets trait information for (unique) taxa.
fuzzy2crisp translate fuzzy traits into crisp traits.
crisp2fuzzy translate crisp traits into fuzzy traits. Note: this makes sense only for categorical traits.
extendTrait expands taxon x trait data based on their taxonomic composition."><title>Functions for working with trait and taxonomic data. — Trait and taxonomic functions • Btrait</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Functions for working with trait and taxonomic data. — Trait and taxonomic functions"><meta property="og:description" content="getTrait gets trait information for (unique) taxa.
fuzzy2crisp translate fuzzy traits into crisp traits.
crisp2fuzzy translate crisp traits into fuzzy traits. Note: this makes sense only for categorical traits.
extendTrait expands taxon x trait data based on their taxonomic composition."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">Btrait</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/Btrait.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/BtraitData.html">Benthic density and trait databases in R-package Btrait</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Functions for working with trait and taxonomic data.</h1>
      
      <div class="d-none name"><code>traitfun.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>getTrait</code> gets trait information for (unique) taxa.</p>
<p><code>fuzzy2crisp</code> translate fuzzy traits into crisp traits.</p>
<p><code>crisp2fuzzy</code> translate crisp traits into fuzzy traits. Note: this makes sense only for categorical traits.</p>
<p><code>extendTrait</code> expands taxon x trait data based on their taxonomic composition.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">getTrait</span><span class="op">(</span><span class="va">taxon</span>, <span class="va">trait</span>, trait.class<span class="op">=</span><span class="cn">NULL</span>, trait.score<span class="op">=</span><span class="cn">NULL</span>, </span>
<span>         taxonomy <span class="op">=</span> <span class="cn">NULL</span>, t.column <span class="op">=</span> <span class="fl">1</span>, </span>
<span>         standardize <span class="op">=</span> <span class="cn">FALSE</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">extendTrait</span><span class="op">(</span><span class="va">trait</span>, <span class="va">taxonomy</span>, t.column <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> </span>
<span></span>
<span><span class="fu">fuzzy2crisp</span><span class="op">(</span><span class="va">trait</span>, <span class="va">trait.class</span>, <span class="va">trait.score</span>, t.column <span class="op">=</span> <span class="fl">1</span>, </span>
<span>        standardize <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">crisp2fuzzy</span> <span class="op">(</span><span class="va">trait</span>, t.column <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>taxon </dt>
<dd><p>vector with the taxon names for which to get the trait information.</p></dd>

  <dt>trait</dt>
<dd><p>(taxon x trait) data or (descriptor x trait) data, in WIDE format. 
  Traits can be fuzzy coded. In the default setting, the first column contains the name of the taxon, and <code>t.column=1</code>. It is also allowed to have the taxa as <code>row.names</code> of the data.frame - set <code>t.column=0</code>.</p></dd>

  <dt>trait.class </dt>
<dd><p>indices to trait classes, a vector. The length of this vector should equal the number of columns of <code>trait</code> minus the descriptor columns  (nrow(<code>trait</code>) - <code>t.column</code>). If not <code>NULL</code>, the fuzzy traits will be converted to crisp values.</p></dd>

  <dt>trait.score </dt>
<dd><p>trait values or scores, a vector. Should be of same length as <code>trait.class</code>.</p></dd>

  <dt>standardize </dt>
<dd><p>when TRUE, will standardize the trait modalities, so that for each trait class they sum to 1. Only used when <code>trait.class</code> is given a value.</p></dd>

  <dt>verbose </dt>
<dd><p>when TRUE, will write warnings to the screen.</p></dd>

  <dt>taxonomy </dt>
<dd><p>taxonomic information (the relationships between the taxa), a data.frame; first column will be matched with <code>taxon</code>, regardless of its name. This is used to estimate traits of taxa that are not accounted for, and that will be estimated based on taxa at the nearest taxonomic level. See details.</p></dd>

  <dt>t.column </dt>
<dd><p>position(s) or name(s) of the column(s) that holds the taxon of the data set. The default is to have the first column holding the taxon. If <code>NULL</code>, or <code>0</code>, then there is no separate column with names, so the <code>row.names</code> of the dataset are used as the taxon names.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    


<p><code>extendTrait</code> returns the trait matrix, augmented with higher taxonomic levels,</p>


<p><code>getTrait</code> returns the taxon x trait matrix, in fuzzy format (if the <code>trait</code> database was in fuzzy format). However, when <code>trait.class</code> is not NULL, the matrix will be in crisp format.</p>


<p><code>fuzzy2crisp</code> returns the trait matrix, in crisp format (not fuzzy coded),</p>


<p><code>crisp2fuzzy</code> returns the trait matrix, in fuzzy format. If the original,fuzzy trait matrix was categorical, the output will include a description of each column, in its attribute <code>description</code>, use <code>metadata(...)</code> to extract this.</p>


    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Karline Soetaert &lt;karline.soetaert@nioz.nl&gt;
  Olivier Beauchard</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><a href="MWTLdensitydata.html">MWTL</a> for the data sets.</p>
<p><a href="BtraitMap.html">mapBtrait</a> for simple plotting functions.</p>
<p><a href="densityfun.html">getDensity</a> for functions working with density data.</p>
<p><a href="summary.html">getSummary</a> for estimating summaries from density data.</p>
<p><a href="getTraitDensity.html">getTraitDensity</a> for functions combining density and traits.</p>
<p><a href="getIndices.html">getDbIndex</a> for extracting bioturbation and bioirrigation indices.</p></div>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The <code>taxonomy</code> is used to fill in the gaps of the trait information, assuming that closely related taxa will share similar traits. This is done in several steps:</p>
<p>In function <code>extendTrait</code> the traits are extended with information on higher taxonomic levels, provided that information is not yet in the trait database. The traits for a taxonomic level are estimated as the average of the traits at the lower level. For instance, traits on genus level will be averages of known traits of all species in the database belonging to this genus.</p>
<p>In function *getTrait*, the trait database is first extended with information on higher taxonomic levels (using *extendTrait*). Then, for each taxon that is not present in the trait database, the traits on the closest taxonomic level are used. For instance, for an  unrecorded species, it is first checked if the trait is known on genus level, if not, family level and so on.</p>

<p>for <code>taxon.getTrait</code>, only the traits for unique taxa are returned.
Traits will be <code>NA</code> if traits were not present in the trait database and that 
could not be derived based on taxonomic closeness. The list of taxa whose 
traits remain unknown can be found in <code>attributes(..)$notrait</code>.</p>
<p>It is best, for subsequent calculations, to remove the <code>NA</code>s in the result, 
or to put them to 0 (when the remaining unassigned taxa are deemed to be acceptable).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ====================================================</span></span></span>
<span class="r-in"><span><span class="co">## Small dataset: taxonomy</span></span></span>
<span class="r-in"><span><span class="co">## ====================================================</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">Btaxonomy</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  species <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sp.1"</span>,<span class="st">"sp.2"</span>,<span class="st">"sp.3"</span>,<span class="st">"sp.4"</span>,<span class="st">"sp.5"</span>,<span class="st">"sp.6"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  genus   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="st">"g.1"</span>, <span class="st">"g.2"</span>, <span class="st">"g.2"</span>, <span class="st">"g.2"</span>, <span class="st">"g.3"</span>, <span class="st">"g.4"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  family  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="st">"f.1"</span>, <span class="st">"f.1"</span>, <span class="st">"f.1"</span>, <span class="st">"f.1"</span>, <span class="st">"f.2"</span>, <span class="st">"f.3"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  order   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="st">"o.1"</span>, <span class="st">"o.1"</span>, <span class="st">"o.1"</span>, <span class="st">"o.1"</span>, <span class="st">"o.2"</span>, <span class="st">"o.2"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  class   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="st">"c.1"</span>, <span class="st">"c.1"</span>, <span class="st">"c.1"</span>, <span class="st">"c.1"</span>, <span class="st">"c.1"</span>, <span class="st">"c.1"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ====================================================</span></span></span>
<span class="r-in"><span><span class="co">## Small dataset: fuzzy-coded traits</span></span></span>
<span class="r-in"><span><span class="co">## ====================================================</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">Btraits</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  species <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sp.1"</span>,<span class="st">"sp.2"</span>,<span class="st">"sp.3"</span>,<span class="st">"sp.5"</span>,<span class="st">"sp.6"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  T1_M1   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>     , <span class="fl">0</span>    ,   <span class="fl">0</span>  , <span class="fl">0.2</span>  ,     <span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  T1_M2   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>     , <span class="fl">0</span>    , <span class="fl">0.5</span>  , <span class="fl">0.3</span>  ,     <span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  T1_M3   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>     , <span class="fl">1</span>    , <span class="fl">0.5</span>  , <span class="fl">0.5</span>  ,     <span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  T2_M1   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>     , <span class="fl">0</span>    ,   <span class="fl">1</span>  , <span class="fl">0.5</span>  ,     <span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  T2_M2   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>     , <span class="fl">1</span>    ,   <span class="fl">0</span>  , <span class="fl">0.5</span>  ,     <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># The 'metadata' of this trait database</span></span></span>
<span class="r-in"><span><span class="va">Btraits.lab</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  colname  <span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"T1_M1"</span>,<span class="st">"T1_M2"</span>,<span class="st">"T1_M3"</span>,<span class="st">"T2_M1"</span>,<span class="st">"T2_M2"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  trait    <span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"T1"</span>   ,<span class="st">"T1"</span>   ,<span class="st">"T1"</span>   ,<span class="st">"T2"</span>   ,<span class="st">"T2"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  modality <span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"M1"</span>   ,<span class="st">"M2"</span>   ,<span class="st">"M3"</span>   ,<span class="st">"M1"</span>   ,<span class="st">"M2"</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>  score    <span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>      , <span class="fl">0.5</span>   , <span class="fl">1</span>     , <span class="fl">0.2</span>   , <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">##-----------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Show traits</span></span></span>
<span class="r-in"><span><span class="co">##-----------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># sp.4 is not in Btraits </span></span></span>
<span class="r-in"><span><span class="fu">getTrait</span> <span class="op">(</span>taxon      <span class="op">=</span> <span class="st">"sp.4"</span>, </span></span>
<span class="r-in"><span>          trait      <span class="op">=</span> <span class="va">Btraits</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   taxon T1_M1 T1_M2 T1_M3 T2_M1 T2_M2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  sp.4    NA    NA    NA    NA    NA</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># sp.4 traits derived from taxonomic tree (g.2)</span></span></span>
<span class="r-in"><span><span class="fu">getTrait</span> <span class="op">(</span>taxon      <span class="op">=</span> <span class="st">"sp.4"</span>, </span></span>
<span class="r-in"><span>          trait      <span class="op">=</span> <span class="va">Btraits</span>, </span></span>
<span class="r-in"><span>          taxonomy   <span class="op">=</span> <span class="va">Btaxonomy</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   species T1_M1 T1_M2 T1_M3 T2_M1 T2_M2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    sp.4     0  0.25  0.75   0.5   0.5</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">getTrait</span> <span class="op">(</span>taxon      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"g.2"</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>          trait      <span class="op">=</span> <span class="va">Btraits</span>, </span></span>
<span class="r-in"><span>          taxonomy   <span class="op">=</span> <span class="va">Btaxonomy</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   species T1_M1 T1_M2 T1_M3 T2_M1 T2_M2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     g.2     0  0.25  0.75   0.5   0.5</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># g.2 is derived as mean of sp.2, sp.3 and sp.4 </span></span></span>
<span class="r-in"><span><span class="fu">getTrait</span> <span class="op">(</span>taxon      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sp.2"</span>, <span class="st">"sp.3"</span>, <span class="st">"sp.4"</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>          trait      <span class="op">=</span> <span class="va">Btraits</span>, </span></span>
<span class="r-in"><span>          taxonomy   <span class="op">=</span> <span class="va">Btaxonomy</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   species T1_M1 T1_M2 T1_M3 T2_M1 T2_M2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    sp.2     0  0.00  1.00   0.0   1.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    sp.3     0  0.50  0.50   1.0   0.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    sp.4     0  0.25  0.75   0.5   0.5</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">getTrait</span> <span class="op">(</span>taxon      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"g.2"</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>          trait      <span class="op">=</span> <span class="va">Btraits</span>, </span></span>
<span class="r-in"><span>          taxonomy   <span class="op">=</span> <span class="va">Btaxonomy</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   species T1_M1 T1_M2 T1_M3 T2_M1 T2_M2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     g.2     0  0.25  0.75   0.5   0.5</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">##-----------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## crisp values of traits</span></span></span>
<span class="r-in"><span><span class="co">##-----------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># for categoric values: the most abundant category is taken</span></span></span>
<span class="r-in"><span> <span class="va">C1</span> <span class="op">&lt;-</span> <span class="fu">fuzzy2crisp</span><span class="op">(</span>trait       <span class="op">=</span> <span class="va">Btraits</span>, </span></span>
<span class="r-in"><span>                   trait.class <span class="op">=</span> <span class="va">Btraits.lab</span><span class="op">$</span><span class="va">trait</span>, </span></span>
<span class="r-in"><span>                   trait.score <span class="op">=</span> <span class="va">Btraits.lab</span><span class="op">$</span><span class="va">modality</span>, </span></span>
<span class="r-in"><span>                   standardize <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="va">C1</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   species T1 T2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    sp.1 M2 M2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    sp.2 M3 M2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    sp.3 M2 M1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    sp.5 M3 M1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    sp.6 M1 M1</span>
<span class="r-in"><span> </span></span>
<span class="r-in"><span><span class="co"># the reverse returns a binary-coded value</span></span></span>
<span class="r-in"><span> <span class="op">(</span><span class="va">C2fuz</span> <span class="op">&lt;-</span> <span class="fu">crisp2fuzzy</span><span class="op">(</span>trait       <span class="op">=</span> <span class="va">C1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   species T1_M1 T1_M2 T1_M3 T2_M1 T2_M2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    sp.1     0     1     0     0     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    sp.2     0     0     1     0     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    sp.3     0     1     0     1     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    sp.5     0     0     1     1     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    sp.6     1     0     0     1     0</span>
<span class="r-in"><span> <span class="fu"><a href="utilities.html">metadata</a></span><span class="op">(</span><span class="va">C2fuz</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     colname trait modality</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> T11   T1_M1    T1       M1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> T12   T1_M2    T1       M2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> T13   T1_M3    T1       M3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> T21   T2_M1    T2       M1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> T22   T2_M2    T2       M2</span>
<span class="r-in"><span> </span></span>
<span class="r-in"><span><span class="co"># for numeric (or binary) values: the weighted mean is calculated</span></span></span>
<span class="r-in"><span> <span class="va">C2</span> <span class="op">&lt;-</span> <span class="fu">fuzzy2crisp</span><span class="op">(</span>trait       <span class="op">=</span> <span class="va">Btraits</span>, </span></span>
<span class="r-in"><span>                   trait.class <span class="op">=</span> <span class="va">Btraits.lab</span><span class="op">$</span><span class="va">trait</span>, </span></span>
<span class="r-in"><span>                   trait.score <span class="op">=</span> <span class="va">Btraits.lab</span><span class="op">$</span><span class="va">score</span>, </span></span>
<span class="r-in"><span>                   standardize <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="va">C2</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   species   T1  T2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    sp.1 0.50 2.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    sp.2 1.00 2.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    sp.3 0.75 0.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    sp.5 0.65 1.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    sp.6 0.00 0.2</span>
<span class="r-in"><span> <span class="op">(</span><span class="va">C2f</span> <span class="op">&lt;-</span> <span class="fu">crisp2fuzzy</span><span class="op">(</span><span class="va">C2</span><span class="op">)</span><span class="op">)</span>  <span class="co"># this has no effect</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   species   T1  T2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    sp.1 0.50 2.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    sp.2 1.00 2.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    sp.3 0.75 0.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    sp.5 0.65 1.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    sp.6 0.00 0.2</span>
<span class="r-in"><span> </span></span>
<span class="r-in"><span><span class="co">##-----------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Extend traits with higher level information</span></span></span>
<span class="r-in"><span><span class="co">##-----------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">Btraits.ext</span> <span class="op">&lt;-</span> <span class="fu">extendTrait</span> <span class="op">(</span>trait    <span class="op">=</span> <span class="va">Btraits</span>, </span></span>
<span class="r-in"><span>                            taxonomy <span class="op">=</span> <span class="va">Btaxonomy</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">Btraits.all</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">Btraits</span>, <span class="va">Btraits.ext</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">Btraits.all</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    species T1_M1 T1_M2 T1_M3     T2_M1     T2_M2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     sp.1  0.00  1.00  0.00 0.0000000 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     sp.2  0.00  0.00  1.00 0.0000000 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     sp.3  0.00  0.50  0.50 1.0000000 0.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     sp.5  0.20  0.30  0.50 0.5000000 0.5000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     sp.6  1.00  0.00  0.00 1.0000000 0.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6      g.1  0.00  1.00  0.00 0.0000000 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7      g.2  0.00  0.25  0.75 0.5000000 0.5000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8      g.3  0.20  0.30  0.50 0.5000000 0.5000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9      g.4  1.00  0.00  0.00 1.0000000 0.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10     f.1  0.00  0.50  0.50 0.3333333 0.6666667</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11     f.2  0.20  0.30  0.50 0.5000000 0.5000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12     f.3  1.00  0.00  0.00 1.0000000 0.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13     o.1  0.00  0.50  0.50 0.3333333 0.6666667</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14     o.2  0.60  0.15  0.25 0.7500000 0.2500000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15     c.1  0.24  0.36  0.40 0.5000000 0.5000000</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#same, but in crisp format</span></span></span>
<span class="r-in"><span><span class="fu">fuzzy2crisp</span><span class="op">(</span>trait       <span class="op">=</span> <span class="va">Btraits.all</span>, </span></span>
<span class="r-in"><span>            trait.score <span class="op">=</span> <span class="va">Btraits.lab</span><span class="op">$</span><span class="va">score</span>, </span></span>
<span class="r-in"><span>            trait.class <span class="op">=</span> <span class="va">Btraits.lab</span><span class="op">$</span><span class="va">trait</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    species    T1   T2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     sp.1 0.500 2.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     sp.2 1.000 2.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     sp.3 0.750 0.20</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     sp.5 0.650 1.10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     sp.6 0.000 0.20</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6      g.1 0.500 2.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7      g.2 0.875 1.10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8      g.3 0.650 1.10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9      g.4 0.000 0.20</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10     f.1 0.750 1.40</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11     f.2 0.650 1.10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12     f.3 0.000 0.20</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13     o.1 0.750 1.40</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14     o.2 0.325 0.65</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15     c.1 0.580 1.10</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># In one go, and including sp.4</span></span></span>
<span class="r-in"><span><span class="fu">getTrait</span> <span class="op">(</span>taxon    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sp.1"</span>, <span class="st">"sp.2"</span>, <span class="st">"sp.3"</span>, <span class="st">"sp.4"</span>, <span class="st">"sp.5"</span>, <span class="st">"sp.6"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>          trait    <span class="op">=</span> <span class="va">Btraits</span>, </span></span>
<span class="r-in"><span>          taxonomy <span class="op">=</span> <span class="va">Btaxonomy</span>, </span></span>
<span class="r-in"><span>          trait.score <span class="op">=</span> <span class="va">Btraits.lab</span><span class="op">$</span><span class="va">score</span>, </span></span>
<span class="r-in"><span>          trait.class <span class="op">=</span> <span class="va">Btraits.lab</span><span class="op">$</span><span class="va">trait</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   species    T1  T2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    sp.1 0.500 2.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    sp.2 1.000 2.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    sp.3 0.750 0.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    sp.4 0.875 1.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    sp.5 0.650 1.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6    sp.6 0.000 0.2</span>
<span class="r-in"><span>          </span></span>
<span class="r-in"><span>          </span></span>
<span class="r-in"><span><span class="va">TraitSmall</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>species<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Alcyonium acaule"</span>,  <span class="st">"Alcyonium coralloides"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                         T1.M1<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.9</span>,<span class="fl">1</span><span class="op">)</span>, T1.M2<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>,<span class="fl">0</span><span class="op">)</span>, T1.M3<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">TaxSmall</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>species <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Alcyonium acaule"</span>,  <span class="st">"Alcyonium coralloides"</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>              Genus   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Alcyonium"</span>, <span class="st">"Alcyonium"</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>              Family  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Alcyoniidae"</span>, <span class="st">"Alcyoniidae"</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>              order   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Alcyonacea"</span>, <span class="st">"Alcyonacea"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">T1</span> <span class="op">&lt;-</span> <span class="fu">extendTrait</span><span class="op">(</span>trait<span class="op">=</span><span class="va">TraitSmall</span>, taxonomy<span class="op">=</span><span class="va">TaxSmall</span><span class="op">)</span>         </span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Karline Soetaert.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

